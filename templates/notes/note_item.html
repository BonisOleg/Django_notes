<div class="note-block" data-id="{{ note.pk }}" draggable="true">
  <div class="note-header">
    <h2>{{ note.title }}</h2>
    <p class="created-at">{{ note.created_at|date:"d.m.Y H:i" }}</p>
  </div>

  <div class="note-content">
    <p>{{ note.text|linebreaks }}</p>
    {% if note.note_footer %}
    <p class="footer"><em>{{ note.note_footer }}</em></p>
    {% endif %}
  </div>
  <span class="expand-btn">Показати більше</span>

  <div class="actions">
    <a href="{% url 'edit_note' note.pk %}">Редагувати</a> |
    <a href="{% url 'delete_note' note.pk %}">Видалити</a>
    {% if note.folder %}
    | <a href="#" class="return-from-folder" data-note-id="{{ note.pk }}">Повернути з папки</a>
    {% endif %}
  </div>
</div>

<script>
  document.querySelectorAll('.expand-btn').forEach(btn => {
    const content = btn.previousElementSibling;
    const originalHeight = content.scrollHeight;

    if (originalHeight <= 150) {
      btn.style.display = 'none';
    } else {
      btn.addEventListener('click', () => {
        content.classList.toggle('expanded');
        btn.textContent = content.classList.contains('expanded') ? 'Показати менше' : 'Показати більше';
      });
    }
  });
</script>